# 旋转-缩放通用工具库

设计目的：
  实现以任意角度、任意缩放进行原图采样[1]的通用工具
  
子结构：
  1. 旋转缩放算法
  2. 接口设计
  3. 边界矫正
  4. 零一误差矫正

## 一、旋转缩放算法

事实上，图像的旋转变换是一个非常简单的数学运算，同时，早已有大量现成的工具库可以使用[2]。
首先让我们回到高中，设 XOY 平面上有坐标点 P0=(x0, y0)，我们知道它可以用极坐标表示为 P =（r, a），并满足：
```
x0 = r * cosa, y0 = r * sina, r = sqrt(x0*x0 + y0*y0), a = arctan(y0/x0)
```
现令 P0 绕原点逆时针旋转至 P=(x,y) 处，不妨设旋转角度 e，则其极坐标为 P=（r, a+e），由坐标间对应关系可知，其依然满足：
```
x = r * cos(a+e), y = r * sin(a+e)
```
我们将三角函数展开，可得如下表达式：
```
x = r * cosa * cose - r * sina * sine
y = r * sina * cose + r * cosa * sine
```
由几何关系不难发现，上式中的 r * sina 恰表示 y0；r * cosa 恰表示 x0，因此进一步简化，得：
```
x = x0 * cose - y0 * sine
y = y0 * cose + x0 * sine
```
现在让我们进入大学，学过线性代数或高等代数的人显然不会对上式感到陌生，这是一个典型的线性变换，可记作：
```
P = A × P0
其中，A = [
  cose   -sine
  sine    cose
]
```
式中， P(x,y) 随 P0(x0,y0) 变化，变化法则被矩阵 A 所唯一确定，类似这样的变换统一称为 “仿射变换”











